<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>/Pakete bauen</title>
		<meta name='Generator' content='Zim 0.53'>
		<style type='text/css'>
			a          { text-decoration: none      }
			a:hover    { text-decoration: underline }
			a:active   { text-decoration: underline }
			strike     { color: grey                }
			u          { text-decoration: none;
			             background-color: yellow   }
			tt         { color: #2e3436;            }
			pre        { color: #2e3436;
			             margin-left: 20px          }
			h1         { text-align: center;
			             color: #4e9a06             }
			h2         { color: #4e9a06             }
			h3         { color: #4e9a06             }
			h4         { color: #4e9a06             }
			h5         { color: #4e9a06             }
			span.insen { color: grey                }
			.page { max-width: 1000px;}
			.menu{
				float:left; width: 300px;
			}
			
			.content { padding-left: 320px;}
			.notebook{font-variant: small-caps;
					color:#4e9a06;
					padding: 0px 20px;}
			hr{clear:both;}
		</style>
		
	</head>
	<body>
		<div class="page">
			<div class="heading">
				<h1><a href="./Home.html" class="notebook">Notes:</a>
			
				
									/Pakete bauen</h1>
			</div>
			<hr>
			<div class="menu">
				<ul>
<li><a href="../../../Linux_Wissen.html" title="Linux Wissen">Linux Wissen</a></li>
<ul>
<li><a href="../../Accessabillity.html" title="Accessabillity">Accessabillity</a></li>
<li><a href="../../Benutzer_und_Gruppen.html" title="Benutzer und Gruppen">Benutzer und Gruppen</a></li>
<li><a href="../../Bibliotheken.html" title="Bibliotheken">Bibliotheken</a></li>
<li><a href="../../Booten.html" title="Booten">Booten</a></li>
<li><a href="../../Dateien_verwalten.html" title="Dateien verwalten">Dateien verwalten</a></li>
<li><a href="../../Datenrettung_und_Forensik.html" title="Datenrettung und Forensik">Datenrettung und Forensik</a></li>
<li><a href="../../Drucken.html" title="Drucken">Drucken</a></li>
<li><a href="../../Emacs_Editor.html" title="Emacs Editor">Emacs Editor</a></li>
<li><a href="../../FHS.html" title="FHS">FHS</a></li>
<li><a href="../../Filterprogramme.html" title="Filterprogramme">Filterprogramme</a></li>
<li><a href="../../git_Vesionskontrolle.html" title="git Vesionskontrolle">git Vesionskontrolle</a></li>
<li><a href="../../Hardware_und_Systeminformationen.html" title="Hardware und Systeminformationen">Hardware und Systeminformationen</a></li>
<li><a href="../../Hilfe_erhalten.html" title="Hilfe erhalten">Hilfe erhalten</a></li>
<li><a href="../../Lokalisierung.html" title="Lokalisierung">Lokalisierung</a></li>
<li><a href="../../Networking.html" title="Networking">Networking</a></li>
<li><a href="../../Paketverwaltung.html" title="Paketverwaltung">Paketverwaltung</a></li>
<ul>
<li><a href="../Debian.html" title="Debian">Debian</a></li>
<ul>
<li><a href="./apt.html" title="apt">apt</a></li>
<li><a href="./dpkg.html" title="dpkg">dpkg</a></li>
<li><strong>Pakete bauen</strong></li>
</ul>
<li><a href="../Rpm.html" title="Rpm">Rpm</a></li>
</ul>
<li><a href="../../Partitionen_und_Dateisysteme.html" title="Partitionen und Dateisysteme">Partitionen und Dateisysteme</a></li>
<li><a href="../../Prozessverwaltung.html" title="Prozessverwaltung">Prozessverwaltung</a></li>
<li><a href="../../root.html" title="root">root</a></li>
<li><a href="../../Shell.html" title="Shell">Shell</a></li>
<li><a href="../../Sicherheit.html" title="Sicherheit">Sicherheit</a></li>
<li><a href="../../SQL.html" title="SQL">SQL</a></li>
<li><a href="../../Systemprogrammierung.html" title="Systemprogrammierung">Systemprogrammierung</a></li>
<li><a href="../../Systemprotokollierung.html" title="Systemprotokollierung">Systemprotokollierung</a></li>
<li><a href="../../Systemzeit.html" title="Systemzeit">Systemzeit</a></li>
<li><a href="../../Vim_Editor.html" title="Vim Editor">Vim Editor</a></li>
<li><a href="../../Web_Fetch_Tools.html" title="Web Fetch Tools">Web Fetch Tools</a></li>
<li><a href="../../X11.html" title="X11">X11</a></li>
<li><a href="../../Zeitgesteuerte_Vorg%C3%A4nge.html" title="Zeitgesteuerte Vorgänge">Zeitgesteuerte Vorgänge</a></li>
<li><a href="../../zzz_Undokumentiert.html" title="zzz Undokumentiert">zzz Undokumentiert</a></li>
</ul>
</ul>

			</div>
			<div class="content">
			<!-- Wiki content -->
				<li>Vorteile einer Paketverwaltung lassen sich nur bei konsequenter Nutzung nutzen.</li>
<li>einfachere Erkennung von Einbrüchen.</li>
<li>Insallierte Dateien können dank der Paketdatenbank besser verwaltet werden.</li>
<li>Alte Konfigurationsdateien bleiben bei der Deinistallation ohne Angabe sie zu löschen erhalten.</li>

<h4>Minimale Umgebung:</h4>
<strong>gcc, g++, make, libc6-dev, dpkg-dev } </strong>→ im Metapaket <em>build-essentials</em>

<h4>zusätzliche Dokumentation:</h4>
<strong>debian-policy, developers-reference</strong>
<a href="http://www.debian.org/doc/developers-reference/" title="http://www.debian.org/doc/developers-reference/">http://www.debian.org/doc/developers-reference/</a>

<strong>apt-get build-dep &lt;Paket&gt;|aptitude build-dep &lt;Paket&gt; </strong><br>
→ herunterladen und installieren der Paketbauabhängigkeiten für &lt;Paket&gt;<br>
<br>
<br>
<strong>fakeroot </strong><br>
→ Programm was den Root Account unter Debian vortäuscht und so das Paket baut<br>
→ kann in einer Umgebung ausgeführt werden, um root Privilegien vorzutäuschen<br>
<strong>--  &lt;Befehl&gt; </strong>→ einen kompletten &lt;Befehl&gt; an den Fakeroot account übergeben<br>
<strong>-s &lt;Datei&gt; </strong>→ die Einstellungen der Fakeroot Umgebung als Snapshot in die &lt;Datei&gt; speichern<br>
<strong>-i &lt;Datei&gt; </strong>→ den Snapshot für die Fakeroot Umgebung lesen<br>
<strong>-u </strong>→ den Besitzer auf unknown wechseln anstelle von root:root<br>
<br>
<h5>Workflow ein Paket neu Übersetzen</h5>
<strong>(1) </strong><code>apt-get -d source </code><br>
→ holt Quellpakete ohne sie zu entpacken<br>
→ enthält in der Regel die Dateien &lt;programm.orig.tar.gz&gt;, &lt;programm.dsc&gt; und &lt;programm.diff.gz&gt;, die in das aktuelle Verzeichnis gepackt werden<br>
<br>
<em>&lt;programm.orig.tar.gz&gt; → </em>Original Quellen auf dem das &lt;Paket&gt; basiert<br>
<br>
<em>&lt;programm.dsc&gt; </em>→ Prüfsummen zu den beiden anderen Dateien<br>
<div style='padding-left: 90pt'>
     → Email Adresse des Paketbetreuers<br>
     → Informationen zum Paketbau <br>
     → Ist vom Paketbetreuer signiert<br>
</div>

<em>&lt;Programm.diff.gz&gt; </em>→ enthält die Änderungen zum Original<br>
<br>
<strong>(2)</strong><code> dpkg-source -x &lt;programm.dsc&gt; </code><br>
→ asupacken und für den Kompilationsvorgang vorbereiten<br>
→ anwenden der Patches<br>
→ Dabei wird ein Ordner &lt;programm&gt;/debian angelegt<br>
<br>
<em>&lt;programm&gt;/debian/README.debian </em>→ Debian betreffende Änderungen und Anmerkungen<br>
<br>
<em>&lt;programm&gt;/debian/changelog </em>→ Changelog des Paketmaintainers<br>
++<br>
<em>&lt;name_programm&gt; (&lt;Versionsnummer) &lt;Codename&gt;; urgency=&lt;level&gt;</em>
<em>  * &lt;Kommantar&gt;</em>
<em>  -- &lt;Name und Email in &lt;&gt; des Maintainers&gt; &lt;Tag der Woche&gt;, &lt;Tag des Jahes&gt; &lt;Monat&gt; &lt;Jahr&gt; &lt;Uhrzeit in HH:MM:SS&gt; &lt;+|-UTC&gt;</em>

<em>quemu (0.7.2-1) unstable; urgency=low</em>
<em>  * Initial release Closes #nnn</em><br>
//  -- Paul Seelig &lt;<a href="mailto:pseelig@debian.org" title="pseelig@debian.org">pseelig@debian.org</a>&gt; Wed, 7 Sep 2005 22:03:21 +0200//<br>
++<br>
<br>
<em>&lt;programm&gt;/debian/control </em>→ enthält Informationen die zum Bau des Paketes benötigt werden<br>
++<br>
<em>Source:                 &lt;Source Paket Name&gt;</em>
<em>Section:                &lt;Angabe der Application Area für das Paket spezifiziert wurde&gt;</em>
<em>Priority:               &lt;Wie wichtig ist es diese Paket zu installiern&gt; requiered, importend, standard, optional, extra</em>
<em>Maintainer:             &lt;Name und E-Mail Adresse (in &lt;&gt;) des Package Maintainers&gt;</em>
<em>Standard-Version:       &lt;Version des Standards (Policy, Manual) mit denen das Paket gebaut wird&gt;</em>
<em>Build-Depends:          &lt;Abhängigkeiten die erfüllt sein müssen um das Paket zu bauen&gt; (&gt;, &lt;, = Versions), ...</em>
<em>Recommends:             das zu installierende Paket empfiehlt dringend auch das hier aufgelistete mitzuinstallieren</em>
<em>Suggests:               das zu installierende Paket ist nützlicher wenn auch dieses Paket installiert</em>
<em>Enhances:               das zu installierende Paket wird durch dieses Paket sinnvoll ergänzt</em>
<em>Conflicts:              Das zu installierende Paket kann nicht gleichzeitig mit diesem installiert sein</em>

<em>Package:                &lt;Name des zu erzeugenden Debian Pakets&gt;</em>
<em>Architecture:           &lt;die Zielarchitektur des Paketes&gt; any,all,i386,am64</em>
<em>Depends:                &lt;Abhängigkeiten zur Laufzeit&gt;</em>
<em>Description:            &lt;Kurze Beschreibung des Paketes&gt;</em>
<em>&lt;Lange Beschreibung des Pakets&gt;</em>

<em>Binary:                 &lt;Eine durch Kommata searierte Liste, die auflistet welche Binärpalete ein Quellpaket erzeugt&gt;</em>
<em>Homepage:               &lt;URL von der der Original Qullcode erstanden werden kann&gt;</em>
<em>Uploaders:              &lt;Liste von nbamen udn E-Mail Adressen weiterer Mitautoren</em>
<em>Files:                  &lt;md5sum&gt; &lt;Größe&gt; &lt;Section&gt; &lt;Priorität&gt;</em><br>
++<br>
<br>
<em>&lt;porgramm&gt;/debian/copyright </em>→ Lizenz und Autoren der Software<br>
<br>
<em>&lt;programm&gt;/debian/dirs </em>→ festlegen von Verzeichnissen, die gebraucht werden aber von Debian nicht automatisch erkannt werden<br>
++<br>
<em>etc/X11/app-defaults</em>
<em>usr/bin</em>
<em>usr/share/doc/xtartan</em>
<em>usr/share/lintian/overrides</em>
<em>usr/share/menu</em><br>
++<br>
<br>
<em>&lt;programm&gt;/debian/lintian.overrides </em><br>
→ Regeln und Definitionen die von <strong>lintian </strong>nicht beachtet werden<br>
→ Ausnahmen <br>
<br>
<em>&lt;programm&gt;/debian/menu </em><br>
→ definieren einer Menudatei<br>
++<br>
<em>?package(totem):\</em>
<em>needs="X11"\</em>
<em>section="Applications/Video"\</em>
<em>title="Totem"\</em>
<em>icon="/usr/share/pixmaps/totem.xpm"\</em>
<em>command="/usr/bin/totem"</em><br>
++<br>
<br>
<em>&lt;programm&gt;/debian/postinst → </em>Script dass nach der Installation ausgeführt wird <br>
<a href="../../Systemprogrammierung/Shellscripting.html" title="Linux Wissen:Systemprogrammierung:Shellscripting">Linux Wissen:Systemprogrammierung:Shellscripting</a>

<em>&lt;programm&gt;/debian/prerm → </em>Scripte dass nach dem entfernen ausgeführt wird<br>
<br>
<em>&lt;programm&gt;/debian/rules </em>
<em>→  </em>Regeln und <strong>make</strong> Anweisungen die aus dem Quellcode das Kompilat erzeugt<br>
→ wird als <em>Makefile </em>relalisiert<br>
++<br>
<em>#!/usr/bin/make -f</em>
<em>config.status:  configure</em>
<em>        dh_testdir</em>
<em>        ./configure --cc=gcc-3.4 --preifx=/usr</em>

<em>build: build-stamp</em>
<em>build-stamp:    config.status</em>
<em>        dh_testdir</em>
<em>        $(MAKE)</em>
<em>        touch build-stamp</em>
<em>clean:</em>
<em>        dh_testdir</em>
<em>        dh_testroot</em>
<em>        rm -f build-stamp</em>
<em>        -$(MAKE) distclean</em>
<em>        dh_clean</em>

<em>install: build</em>
<em>        #deb helper scripte befinden sich im paket dh-make</em>
<em>        dh_testdir</em>
<em>        dh_testroot</em>
<em>        dh_clean -k</em>
<em>        dh_installdirs</em>
<em>        $(MAKE) install prefix=$(CURDIR)/debian/quemu/usr</em>

<em>binary-indep: build install</em>

<em>binary-arch: build install</em>
<em>        dh_...</em>

<em>binary: binary-indep binary-arch #wird zuerst ausgeführt und ruft die verweisenden Sektionen auf</em>
<em>.PHONY: build clean binary-indep binary-arch binary install</em><br>
++<br>
<br>
<h5>Tools</h5>
<strong>dh-make </strong>→ konvertieren und anpassen eines Sourcecode Paketes an die Debian Reggeln<br>
<strong>-c &lt;Lizenz&gt; </strong>→ angeben der Paketlizenz <br>
**-e &lt;<a href="mailto:mail@mail.dom" title="mail@mail.dom">mail@mail.dom</a>&gt; **→ angeben einer E-Mail Adresse<br>
<strong>-n </strong>→ natives Debian Paket bauen, es wird keine orig.tar.gz benötigt<br>
<strong>-f &lt;File.tar.gz&gt; </strong>→ wandelt tar.gz Datei in eine orig.tar.gz Datei um<br>
<strong>-l </strong>→ Setzen der Paketklasse auf Bibliothek<br>
<strong>-s </strong>→ setzen der Paketklasse auf einzelne binäre Datei<br>
<strong>-m </strong>→ setzen der Paketklasse auf multiple binäre Datei<br>
<strong>-p &lt;Name&gt; </strong>→ angeben eines alternernativen Paketnamens abweichend von der Quelldatei<br>
<br>
  <br>
<strong>dpkg-builder </strong>→ Programm dass aus einem Debian Konformen Quellpaket das Debian Paket baut<br>
<strong>-us </strong>→ (unsigned) Paket nicht signieren<br>
<strong>-uc </strong>→ <em> Changes </em>Datei nicht signieren<br>
<strong>-b </strong>→ nur binäre Dateien bauen,keine Quelldateien ereugen<br>
<strong>-S </strong>→ nur Quellpakete erzeugen, keine binären Dateien erzeugen<br>
<strong>-a &lt;Arch&gt; </strong>→ explizite Angabe einer Zielarchitektur<br>
<strong>-d </strong>→ Abhängigkeiten beim Bauen ignorieren<br>
<strong>-rfakroot </strong>→ benutze eine gefälschte Rootumgebung zum Bauen<br>
<br>
<strong>lintian &lt;Paket.deb&gt; </strong><br>
→ Untersucht das Paket nach Bugs und Policyverletzungen<br>
→ dabei wird ein Verzeichnis, labortory angelegt in welche Informationen über das Paket abgelegt werden<br>
 <strong>-d </strong>→ anzeigen von Debugging Nachrichten<br>
<strong>-i|--info </strong>→ anzeigen von detaillierten Informationen zu den einzelnnen Problemen<br>
<strong>-o </strong>→ override Policy nicht benutzen<br>
<strong>--color </strong>→ ein bisschen bunter<br>
<strong>-l|--lab &lt;Verzeichnis&gt; </strong>→ ein alternatives labortory &lt;Verzeichnis&gt; angeben<br>
<strong>-j N </strong>→ Anzahl der Aufträge die gleichzeitig abgewickelt werden<br>
<br>
<strong>pbuilder </strong><br>
→ bauen eines .deb Pakets in einer sicheren sauberen Umgebung<br>
→ stellt sicher dass Abhängigkeiten richtig erkannt wurden<br>
→ es wird eine Chroot Umgebung in einem tarball erstellt<br>
<br>
<strong>pbuilder create </strong><br>
→ erstellt eine Chroot Umgebung für debian sid<br>
<strong>--distribution &lt;Code&gt; </strong>→ erstellt eine Chroot Umgebung für die Distribution &lt;Code&gt;<br>
<br>
<strong>pbuilder update </strong>→ aktualisieren der Chroot Umgebung<br>
<br>
<strong>pbuilder builder &lt;programm.dsc&gt; </strong>→ baut das Programm aus der  Datei <em>&lt;programm.dsc&gt;</em>

<h5>Workflow ein eigenes Paket bauen</h5>
<strong>(1) </strong>Herunterladen und auspacken des Quellcodes, sowie lesen der Dokumentation um entsprechend fehlende Libraries nachzuinstallieren<br>
<br>
<strong>(2) </strong>Aufruf von <strong>dh_make:</strong>
<strong>cd &lt;programm&gt;</strong>
<code>dh_make -f ../&lt;programm.tar.gz&gt; --email noop@mail.dom -c gpl</code>

<strong>(3) </strong>Anpassen und bearbeiten von Dateien in <em>debian </em>Unterverzeichnis<br>
(3.1) debuggen<br>
<br>
<strong>(4) </strong>Das Paket mit <strong>dpkg-buildpackage </strong>bauen: <strong>dpkg-buildpackage -uc -us -rfakeroot</strong>

<strong>(5) </strong>Paket mit <strong>lintian </strong>und <strong>pbuilder </strong>nach Fehlern durchsuchen <br>


			<!-- End wiki content -->
			</div>
			<hr>
			<!-- Backlinks -->
			<div class="footer">
				Backlinks:						<a href='../../Paketverwaltung.html'>Linux Wissen:Paketverwaltung</a></li>
			<!-- End Backlinks -->
			</div>
		</div>
	</body>
</html>
